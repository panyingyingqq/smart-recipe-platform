{"version":3,"file":"Recipes-DgQwNla-.js","sources":["../../src/pages/Recipes.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { supabase } from '../supabase/client';\nimport { Recipe } from '../types';\nimport { Search, Loader2, AlertCircle, Clock, Flame } from 'lucide-react';\nimport { useRecipeStore } from '../stores/recipeStore';\nimport { pinyin } from 'pinyin-pro';\nimport { useInView } from 'react-intersection-observer';\n\nconst Recipes: React.FC = () => {\n  const [recipes, setRecipes] = useState<Recipe[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [inputValue, setInputValue] = useState(''); // For debounced input\n  const [selectedLetter, setSelectedLetter] = useState<string | null>(null);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const { openRecipe } = useRecipeStore();\n  \n  // Pagination / Infinite Scroll state\n  const [visibleCount, setVisibleCount] = useState(12);\n  const { ref: loadMoreRef, inView } = useInView({\n    threshold: 0.1,\n    rootMargin: '100px',\n  });\n\n  const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');\n\n  // Debounce search input\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setSearchQuery(inputValue);\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [inputValue]);\n\n  // Load more when scrolled to bottom\n  useEffect(() => {\n    if (inView) {\n      setVisibleCount(prev => prev + 12);\n    }\n  }, [inView]);\n\n  // Reset visible count when filters change\n  useEffect(() => {\n    setVisibleCount(12);\n  }, [searchQuery, selectedLetter]);\n\n  // Process recipes to include group letter based on Chinese Pinyin\n  const processedRecipes = useMemo(() => {\n    const processed = recipes.map(recipe => {\n      // Generate Pinyin first letters (e.g., \"炸鸡\" -> [\"z\", \"j\"])\n      const pinyinResult = pinyin(recipe.name, { \n        pattern: 'first', \n        toneType: 'none', \n        type: 'array' \n      });\n      \n      // Get the first letter of the entire name\n      const firstChar = pinyinResult?.[0]?.charAt(0).toUpperCase();\n      const groupLetter = (firstChar && /^[A-Z]$/.test(firstChar)) ? firstChar : '#';\n      \n      // Generate full pinyin for sorting (e.g., \"炸鸡\" -> \"zhaji\")\n      const fullPinyin = pinyin(recipe.name, {\n        toneType: 'none',\n        separator: '',\n        type: 'string'\n      });\n\n      return {\n        ...recipe,\n        groupLetter,\n        fullPinyin\n      };\n    });\n\n    // Sort by Group Letter (A-Z, then #) and then by Full Pinyin\n    return processed.sort((a, b) => {\n      if (a.groupLetter === b.groupLetter) {\n        return a.fullPinyin.localeCompare(b.fullPinyin);\n      }\n      if (a.groupLetter === '#') return 1;\n      if (b.groupLetter === '#') return -1;\n      return a.groupLetter.localeCompare(b.groupLetter);\n    });\n  }, [recipes]);\n\n  // Generate suggestions based on search query\n  const suggestions = useMemo(() => {\n    if (!inputValue.trim()) return [];\n    const query = inputValue.toLowerCase();\n    const uniqueSuggestions = new Set<string>();\n    \n    // Search in recipe names\n    for (const recipe of recipes) {\n        if (recipe.name.toLowerCase().includes(query)) {\n            uniqueSuggestions.add(recipe.name);\n        }\n        if (uniqueSuggestions.size >= 8) break;\n    }\n    \n    return Array.from(uniqueSuggestions);\n  }, [inputValue, recipes]);\n\n  useEffect(() => {\n    fetchRecipes();\n  }, []);\n\n  const fetchRecipes = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const { data, error: fetchError } = await supabase\n        .from('recipes')\n        .select(`\n          *,\n          ingredients:recipe_ingredients(\n            amount, unit, notes, hint, name,\n            ingredient:ingredients(name, image_url, category)\n          ),\n          steps:recipe_steps(*)\n        `)\n        .eq('is_public', true)\n        .order('name_en', { ascending: true }); // Default sort A-Z\n\n      if (fetchError) throw fetchError;\n      \n      setRecipes(data as Recipe[] || []);\n    } catch (err: any) {\n      console.error('Error fetching recipes:', err);\n      setError('无法加载食谱数据，请稍后重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter logic\n  const filteredRecipes = useMemo(() => {\n    return processedRecipes.filter((recipe) => {\n      // 1. A-Z Filter\n      if (selectedLetter) {\n        if (recipe.groupLetter !== selectedLetter) {\n          return false;\n        }\n      }\n\n      // 2. Search Query Filter\n      if (searchQuery) {\n        const query = searchQuery.toLowerCase();\n        const matchesName = recipe.name.toLowerCase().includes(query);\n        const matchesNameEn = recipe.name_en?.toLowerCase().includes(query);\n        const matchesIngredient = recipe.ingredients?.some(ri => \n          ri.ingredient?.name.toLowerCase().includes(query)\n        );\n        \n        return matchesName || matchesNameEn || matchesIngredient;\n      }\n      \n      return true;\n    });\n  }, [processedRecipes, selectedLetter, searchQuery]);\n\n  // Calculate available letters for navigation\n  const availableLetters = useMemo(() => {\n    const letters = new Set<string>();\n    processedRecipes.forEach(recipe => {\n      if (alphabet.includes(recipe.groupLetter)) {\n        letters.add(recipe.groupLetter);\n      }\n    });\n    return letters;\n  }, [processedRecipes, alphabet]);\n\n  const displayedRecipes = filteredRecipes.slice(0, visibleCount);\n\n  return (\n    <div className=\"space-y-8 relative z-10\">\n      <section className=\"text-center py-8\">\n        <h1 className=\"text-3xl md:text-5xl font-bold text-kawaii-text-main mb-4 font-cute tracking-wide\">\n          食谱目录\n        </h1>\n        <p className=\"text-kawaii-text-sub mb-8 max-w-2xl mx-auto font-cute text-lg\">\n          按字母索引或关键词搜索，探索我们的美食宝库。\n        </p>\n\n        {/* Search Bar */}\n        <div className=\"relative max-w-xl mx-auto mb-10 z-20\">\n          <input\n            type=\"text\"\n            placeholder=\"搜索食谱、食材 (如: 宫保鸡丁, 鸡肉)...\"\n            value={inputValue}\n            onChange={(e) => {\n              setInputValue(e.target.value);\n              setShowSuggestions(true);\n              setSelectedLetter(null); // Clear letter filter on search\n            }}\n            onFocus={() => setShowSuggestions(true)}\n            onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n            className=\"w-full pl-12 pr-4 py-4 rounded-full border-2 border-kawaii-pink-200 focus:border-kawaii-pink-500 focus:ring-4 focus:ring-kawaii-pink-100 outline-none transition-all shadow-soft font-cute text-kawaii-text-main bg-white/90 backdrop-blur-sm\"\n          />\n          <Search className=\"absolute left-4 top-4 w-6 h-6 text-kawaii-pink-400\" />\n          \n          {/* Suggestions Dropdown */}\n          {showSuggestions && suggestions.length > 0 && (\n            <div className=\"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-sticker border border-kawaii-pink-100 overflow-hidden z-30\">\n              {suggestions.map((s, idx) => (\n                <div\n                  key={idx}\n                  onClick={() => {\n                    setInputValue(s);\n                    setShowSuggestions(false);\n                  }}\n                  className=\"px-4 py-3 hover:bg-kawaii-pink-50 cursor-pointer text-left text-kawaii-text-main font-cute border-b border-gray-50 last:border-0\"\n                >\n                  {s}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* A-Z Navigation */}\n        <div className=\"flex flex-wrap justify-center gap-3 mb-10 px-2\">\n          <button\n            onClick={() => setSelectedLetter(null)}\n            className={`px-4 py-2 rounded-xl text-sm font-bold transition-all font-cute shadow-sm ${\n              selectedLetter === null\n                ? 'bg-kawaii-pink-500 text-white shadow-sticker transform scale-105 ring-2 ring-white'\n                : 'bg-white text-kawaii-text-sub hover:bg-kawaii-pink-100 hover:text-kawaii-pink-700'\n            }`}\n          >\n            全部\n          </button>\n          {alphabet.map((letter) => {\n            const isDisabled = !availableLetters.has(letter);\n            return (\n                <button\n                key={letter}\n                disabled={isDisabled}\n                onClick={() => {\n                    setSelectedLetter(letter);\n                    setInputValue(''); // Clear search on letter click\n                }}\n                className={`w-10 h-10 rounded-xl text-sm font-bold flex items-center justify-center transition-all font-cute ${\n                    selectedLetter === letter\n                    ? 'bg-kawaii-pink-500 text-white shadow-sticker transform scale-110 ring-2 ring-white z-10'\n                    : isDisabled \n                        ? 'bg-gray-50 text-gray-300 cursor-not-allowed'\n                        : 'bg-white text-kawaii-text-sub hover:bg-kawaii-pink-100 hover:text-kawaii-pink-700 shadow-sm'\n                }`}\n                >\n                {letter}\n                </button>\n            );\n          })}\n        </div>\n      </section>\n\n      {/* Error Message */}\n      {error && (\n        <div className=\"max-w-md mx-auto bg-red-50 text-red-600 p-4 rounded-2xl flex items-center gap-3 mb-8 shadow-sm font-cute border border-red-100\">\n          <AlertCircle className=\"w-5 h-5 flex-shrink-0\" />\n          <p>{error}</p>\n        </div>\n      )}\n\n      {/* Recipes Grid */}\n      {loading ? (\n        <div className=\"flex justify-center py-20\">\n          <Loader2 className=\"w-12 h-12 text-kawaii-pink-500 animate-spin\" />\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 px-4 pb-12\">\n          {displayedRecipes.length > 0 ? (\n            <>\n              {displayedRecipes.map((recipe) => (\n                <div\n                  key={recipe.id}\n                  onClick={() => openRecipe(recipe)}\n                  className=\"bg-white rounded-3xl shadow-soft overflow-hidden hover:shadow-sticker transition-all cursor-pointer group border-4 border-white hover:border-kawaii-pink-100 hover:-translate-y-1 content-visibility-auto contain-intrinsic-size-[400px]\"\n                >\n                  <div className=\"h-52 overflow-hidden relative\">\n                    <img\n                      src={recipe.cover_image || 'https://images.unsplash.com/photo-1495521841625-f342588d6e65?auto=format&fit=crop&w=800&q=80'}\n                      alt={recipe.name}\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n                      loading=\"lazy\"\n                      decoding=\"async\"\n                      width=\"400\"\n                      height=\"208\"\n                    />\n                    <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-4 pt-12\">\n                      <h3 className=\"font-bold text-xl text-white mb-1 font-cute drop-shadow-md\">\n                        {recipe.name}\n                      </h3>\n                    </div>\n                  </div>\n                  <div className=\"p-5\">\n                    <div className=\"flex items-center gap-4 text-sm text-kawaii-text-sub mb-3 font-cute\">\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"w-4 h-4 text-kawaii-pink-400\" />\n                        <span>{recipe.total_time}分</span>\n                      </div>\n                      <div className=\"flex items-center gap-1\">\n                        <Flame className=\"w-4 h-4 text-kawaii-pink-400\" />\n                        <span>难度 {recipe.difficulty}</span>\n                      </div>\n                    </div>\n                    <p className=\"text-kawaii-text-sub text-sm line-clamp-2 font-cute leading-relaxed\">\n                      {recipe.description}\n                    </p>\n                  </div>\n                </div>\n              ))}\n              \n              {/* Load More Sentinel */}\n              {visibleCount < filteredRecipes.length && (\n                <div ref={loadMoreRef} className=\"col-span-full flex justify-center py-8\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-kawaii-pink-300\" />\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"col-span-full text-center py-10 text-kawaii-text-sub flex flex-col items-center gap-4 font-cute\">\n              <div className=\"w-20 h-20 bg-kawaii-pink-50 rounded-full flex items-center justify-center\">\n                <Search className=\"w-10 h-10 text-kawaii-pink-200\" />\n              </div>\n              <p className=\"text-lg\">没有找到匹配的食谱</p>\n              <button \n                onClick={() => setInputValue('')}\n                className=\"text-kawaii-pink-500 text-sm hover:underline hover:text-kawaii-pink-700\"\n              >\n                清除搜索\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Recipes;\n"],"names":["Recipes","recipes","setRecipes","useState","loading","setLoading","error","setError","searchQuery","setSearchQuery","inputValue","setInputValue","selectedLetter","setSelectedLetter","showSuggestions","setShowSuggestions","openRecipe","useRecipeStore","visibleCount","setVisibleCount","ref","loadMoreRef","inView","useInView","threshold","rootMargin","alphabet","split","useEffect","timer","setTimeout","clearTimeout","prev","processedRecipes","useMemo","map","recipe","pinyinResult","pinyin","name","pattern","toneType","type","firstChar","charAt","toUpperCase","groupLetter","test","fullPinyin","separator","sort","a","b","localeCompare","suggestions","trim","query","toLowerCase","uniqueSuggestions","Set","includes","add","size","Array","from","fetchRecipes","data","fetchError","supabase","select","eq","order","ascending","err","console","filteredRecipes","filter","matchesName","matchesNameEn","name_en","matchesIngredient","ingredients","some","ri","ingredient","availableLetters","letters","forEach","displayedRecipes","slice","jsxs","jsx","e","target","value","Search","length","s","idx","letter","isDisabled","has","AlertCircle","Loader2","Fragment","cover_image","Clock","total_time","Flame","difficulty","description","id"],"mappings":"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"}