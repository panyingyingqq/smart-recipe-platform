{"version":3,"mappings":"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","names":["m","require$$0","client","supabaseUrl","import","supabaseAnonKey","supabase","createClient","useRecipeStore","create","set","isOpen","selectedRecipe","openRecipe","recipe","closeRecipe","RecipeModal","user","setUser","useState","isFavorite","setIsFavorite","isEditingImage","setIsEditingImage","newImageUrl","setNewImageUrl","navigate","useNavigate","useEffect","auth","getSession","then","data","session","checkFavoriteStatus","cover_image","handleEsc","e","key","window","addEventListener","removeEventListener","from","select","eq","id","maybeSingle","toggleFavorite","error","delete","insert","user_id","recipe_id","handleSaveImage","trim","update","console","alert","AnimatePresence","jsxs","jsx","motion","opacity","y","type","damping","stiffness","Heart","X","name","target","value","Check","Edit","name_en","Clock","total_time","Flame","difficulty","ChefHat","category","description","ingredients","seasonings","filter","i","ingredient","mainIngredients","length","Fragment","map","item","idx","hint","amount","unit","steps","sort","a","b","step_number","step","instruction","image_url","tips","Lightbulb","MainLayout","Link","Search","BookOpen","User","Outlet","Home","React","lazy","__vitePreload","Recipes","UploadRecipe","Login","PageLoader","Loader2","App","Router","Suspense","Routes","Route","createRoot","document","getElementById","render","StrictMode"],"ignoreList":[0],"sources":["../../node_modules/react-dom/client.js","../../src/supabase/client.ts","../../src/stores/recipeStore.ts","../../src/components/RecipeModal.tsx","../../src/layout/MainLayout.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  throw new Error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n","import { create } from 'zustand';\nimport { Recipe } from '../types';\n\ninterface RecipeState {\n  isOpen: boolean;\n  selectedRecipe: Recipe | null;\n  openRecipe: (recipe: Recipe) => void;\n  closeRecipe: () => void;\n}\n\nexport const useRecipeStore = create<RecipeState>((set) => ({\n  isOpen: false,\n  selectedRecipe: null,\n  openRecipe: (recipe) => set({ isOpen: true, selectedRecipe: recipe }),\n  closeRecipe: () => set({ isOpen: false, selectedRecipe: null }),\n}));\n","import React, { useState, useEffect } from 'react';\nimport { RecipeIngredient, RecipeStep } from '../types';\nimport { Clock, Flame, ChefHat, X, Heart, Lightbulb, Edit, Save, Check } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { supabase } from '../supabase/client';\nimport { useNavigate } from 'react-router-dom';\nimport { User } from '@supabase/supabase-js';\nimport { useRecipeStore } from '../stores/recipeStore';\n\nconst RecipeModal: React.FC = () => {\n  const { isOpen, selectedRecipe: recipe, closeRecipe, openRecipe } = useRecipeStore();\n  const [user, setUser] = useState<User | null>(null);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [isEditingImage, setIsEditingImage] = useState(false);\n  const [newImageUrl, setNewImageUrl] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setUser(session?.user ?? null);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (user && recipe) {\n      checkFavoriteStatus();\n      setNewImageUrl(recipe.cover_image || '');\n    } else {\n      setIsFavorite(false);\n    }\n  }, [user, recipe]);\n\n  // Handle ESC key\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        if (isEditingImage) {\n            setIsEditingImage(false);\n        } else {\n            closeRecipe();\n        }\n      }\n    };\n    if (isOpen) {\n      window.addEventListener('keydown', handleEsc);\n    }\n    return () => {\n      window.removeEventListener('keydown', handleEsc);\n    };\n  }, [isOpen, closeRecipe, isEditingImage]);\n\n  const checkFavoriteStatus = async () => {\n    if (!user || !recipe) return;\n    const { data } = await supabase\n      .from('favorites')\n      .select('id')\n      .eq('user_id', user.id)\n      .eq('recipe_id', recipe.id)\n      .maybeSingle();\n    setIsFavorite(!!data);\n  };\n\n  const toggleFavorite = async () => {\n    if (!user) {\n      closeRecipe();\n      navigate('/login');\n      return;\n    }\n    if (!recipe) return;\n\n    if (isFavorite) {\n      const { error } = await supabase\n        .from('favorites')\n        .delete()\n        .eq('user_id', user.id)\n        .eq('recipe_id', recipe.id);\n      if (!error) setIsFavorite(false);\n    } else {\n      const { error } = await supabase\n        .from('favorites')\n        .insert({ user_id: user.id, recipe_id: recipe.id });\n      if (!error) setIsFavorite(true);\n    }\n  };\n\n  const handleSaveImage = async () => {\n    if (!recipe || !newImageUrl.trim()) return;\n\n    try {\n      const { error } = await supabase\n        .from('recipes')\n        .update({ cover_image: newImageUrl.trim() })\n        .eq('id', recipe.id);\n\n      if (error) throw error;\n\n      // Update local state via store\n      openRecipe({ ...recipe, cover_image: newImageUrl.trim() });\n      setIsEditingImage(false);\n    } catch (error) {\n      console.error('Error updating image:', error);\n      alert('更新图片失败，请重试');\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && recipe && (\n        <div className=\"fixed inset-0 z-50 flex items-end md:items-center justify-center sm:p-4\">\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={closeRecipe}\n            className=\"absolute inset-0 bg-black/60 backdrop-blur-sm\"\n          />\n\n          {/* Modal Content */}\n          <motion.div\n            initial={{ y: '100%' }}\n            animate={{ y: 0 }}\n            exit={{ y: '100%' }}\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n            className=\"bg-kawaii-card rounded-t-3xl md:rounded-3xl shadow-sticker w-full max-w-5xl h-[90vh] md:h-[85vh] overflow-hidden relative z-10 flex flex-col md:flex-row border-4 border-white\"\n          >\n            {/* Close & Favorite Buttons (Floating) */}\n            <div className=\"absolute top-4 right-4 flex gap-2 z-20\">\n              <button\n                onClick={toggleFavorite}\n                className=\"p-2 bg-white/90 rounded-full hover:bg-kawaii-pink-100 transition-colors shadow-soft\"\n              >\n                <Heart className={`w-6 h-6 ${isFavorite ? 'fill-kawaii-pink-500 text-kawaii-pink-500' : 'text-gray-400'}`} />\n              </button>\n              <button\n                onClick={closeRecipe}\n                className=\"p-2 bg-white/90 rounded-full hover:bg-kawaii-pink-100 transition-colors shadow-soft\"\n              >\n                <X className=\"w-6 h-6 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Left: Image (Mobile: Top) */}\n            <div className=\"h-64 md:h-full md:w-5/12 relative flex-shrink-0 group/image\">\n              <img\n                src={recipe.cover_image || 'https://images.unsplash.com/photo-1495521841625-f342588d6e65?auto=format&fit=crop&w=800&q=80'}\n                alt={recipe.name}\n                className=\"w-full h-full object-cover\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent md:hidden\"></div>\n              \n              {/* Edit Image Button (Visible on Hover or Editing) */}\n              {(isEditingImage || user) && (\n                <div className={`absolute bottom-4 right-4 z-20 transition-opacity duration-200 ${isEditingImage ? 'opacity-100' : 'opacity-0 group-hover/image:opacity-100'}`}>\n                    {isEditingImage ? (\n                        <div className=\"bg-white p-3 rounded-2xl shadow-sticker flex flex-col gap-2 w-64 absolute bottom-full right-0 mb-2\">\n                            <label className=\"text-xs font-bold text-gray-500 uppercase font-cute\">修改图片链接</label>\n                            <input \n                                type=\"text\" \n                                value={newImageUrl}\n                                onChange={(e) => setNewImageUrl(e.target.value)}\n                                className=\"text-sm border border-kawaii-pink-200 rounded-xl px-3 py-2 w-full focus:outline-none focus:border-kawaii-pink-500 bg-kawaii-pink-50\"\n                                placeholder=\"https://...\"\n                            />\n                            <div className=\"flex gap-2 justify-end mt-1\">\n                                <button \n                                    onClick={() => setIsEditingImage(false)}\n                                    className=\"text-xs text-gray-500 hover:text-gray-700 px-2 py-1 font-cute\"\n                                >\n                                    取消\n                                </button>\n                                <button \n                                    onClick={handleSaveImage}\n                                    className=\"text-xs bg-kawaii-pink-500 text-white px-3 py-1 rounded-full hover:bg-kawaii-pink-700 flex items-center gap-1 font-cute shadow-sm\"\n                                >\n                                    <Check className=\"w-3 h-3\" /> 保存\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                        <button\n                            onClick={() => {\n                                setNewImageUrl(recipe.cover_image || '');\n                                setIsEditingImage(true);\n                            }}\n                            className=\"p-2 bg-white/90 rounded-full hover:bg-kawaii-pink-50 transition-colors shadow-soft flex items-center gap-2 px-3 text-sm font-medium text-gray-700 font-cute\"\n                        >\n                            <Edit className=\"w-4 h-4\" />\n                            <span>更换图片</span>\n                        </button>\n                    )}\n                </div>\n              )}\n\n              <div className=\"absolute bottom-4 left-4 text-white md:hidden pr-12\">\n                <h2 className=\"text-2xl font-bold leading-tight font-cute drop-shadow-md\">{recipe.name}</h2>\n                <p className=\"opacity-90 text-sm font-cute\">{recipe.name_en}</p>\n              </div>\n            </div>\n\n            {/* Right: Content (Scrollable) */}\n            <div className=\"flex-1 overflow-y-auto p-6 md:p-8 bg-kawaii-card scrollbar-thin scrollbar-thumb-kawaii-pink-200 scrollbar-track-transparent\">\n              <div className=\"hidden md:block mb-6\">\n                <h2 className=\"text-3xl font-bold text-kawaii-text-main mb-1 font-cute\">{recipe.name}</h2>\n                <p className=\"text-kawaii-text-sub text-lg font-cute\">{recipe.name_en}</p>\n              </div>\n\n              {/* Meta Info */}\n              <div className=\"flex flex-wrap items-center gap-3 text-sm text-kawaii-text-main mb-6 font-cute\">\n                <div className=\"flex items-center gap-1.5 bg-kawaii-pink-100 px-4 py-2 rounded-full text-kawaii-pink-700 font-bold shadow-sm\">\n                  <Clock className=\"w-4 h-4\" />\n                  <span>{recipe.total_time} 分钟</span>\n                </div>\n                <div className=\"flex items-center gap-1.5 bg-kawaii-pink-100 px-4 py-2 rounded-full text-kawaii-pink-700 font-bold shadow-sm\">\n                  <Flame className=\"w-4 h-4\" />\n                  <span>难度 {recipe.difficulty}/5</span>\n                </div>\n                <div className=\"flex items-center gap-1.5 bg-kawaii-pink-100 px-4 py-2 rounded-full text-kawaii-pink-700 font-bold shadow-sm\">\n                  <ChefHat className=\"w-4 h-4\" />\n                  <span>{recipe.category}</span>\n                </div>\n              </div>\n\n              <p className=\"text-kawaii-text-sub italic mb-8 border-l-4 border-kawaii-pink-300 pl-4 py-2 bg-white/50 rounded-r-xl font-cute\">\n                \"{recipe.description}\"\n              </p>\n\n              <div className=\"grid lg:grid-cols-2 gap-8\">\n                {/* Ingredients & Seasonings */}\n                <div>\n                  <h3 className=\"font-bold text-kawaii-text-main mb-4 text-lg flex items-center gap-2 font-cute\">\n                    <span className=\"w-2 h-6 bg-kawaii-pink-500 rounded-full\"></span>\n                    食材准备\n                  </h3>\n                  \n                  {/* Unified Ingredients List */}\n                  {(() => {\n                    const ingredients = recipe.ingredients || [];\n                    const seasonings = ingredients.filter(i => i.ingredient?.category === '调味品');\n                    const mainIngredients = ingredients.filter(i => i.ingredient?.category !== '调味品');\n                    const hasSeasonings = seasonings.length > 0;\n                    \n                    if (hasSeasonings) {\n                        return (\n                            <>\n                                {/* Main Ingredients */}\n                                <div className=\"mb-6 bg-white p-4 rounded-2xl shadow-soft border border-kawaii-pink-100\">\n                                    <h4 className=\"text-sm font-bold text-kawaii-pink-500 uppercase tracking-wider mb-3 font-cute border-b border-kawaii-pink-100 pb-2\">主料</h4>\n                                    <ul className=\"space-y-3\">\n                                    {mainIngredients.map((item: RecipeIngredient, idx: number) => (\n                                        <li key={idx} className=\"flex justify-between items-center\">\n                                        <div className=\"flex flex-col\">\n                                            <span className=\"text-kawaii-text-main font-medium font-cute\">{item.name || item.ingredient?.name || '未知食材'}</span>\n                                            {item.hint && <span className=\"text-xs text-gray-400 font-cute\">{item.hint}</span>}\n                                        </div>\n                                        <span className=\"text-kawaii-pink-700 text-sm bg-kawaii-pink-50 px-2 py-1 rounded-lg font-cute border border-kawaii-pink-100 whitespace-nowrap ml-2\">\n                                            {item.amount} {item.unit}\n                                        </span>\n                                        </li>\n                                    ))}\n                                    </ul>\n                                </div>\n\n                                {/* Seasonings */}\n                                <div className=\"bg-white p-4 rounded-2xl shadow-soft border border-kawaii-pink-100\">\n                                    <h4 className=\"text-sm font-bold text-kawaii-pink-500 uppercase tracking-wider mb-3 font-cute border-b border-kawaii-pink-100 pb-2\">调料</h4>\n                                    <ul className=\"space-y-3\">\n                                    {seasonings.map((item: RecipeIngredient, idx: number) => (\n                                        <li key={idx} className=\"flex justify-between items-center\">\n                                        <div className=\"flex flex-col\">\n                                            <span className=\"text-kawaii-text-main font-medium font-cute\">{item.name || item.ingredient?.name || '未知食材'}</span>\n                                            {item.hint && <span className=\"text-xs text-gray-400 font-cute\">{item.hint}</span>}\n                                        </div>\n                                        <span className=\"text-kawaii-pink-700 text-sm bg-kawaii-pink-50 px-2 py-1 rounded-lg font-cute border border-kawaii-pink-100 whitespace-nowrap ml-2\">\n                                            {item.amount} {item.unit}\n                                        </span>\n                                        </li>\n                                    ))}\n                                    </ul>\n                                </div>\n                            </>\n                        );\n                    } else {\n                        // Fallback: Show all ingredients in one list\n                         return (\n                            <div className=\"mb-6 bg-white p-4 rounded-2xl shadow-soft border border-kawaii-pink-100\">\n                                <h4 className=\"text-sm font-bold text-kawaii-pink-500 uppercase tracking-wider mb-3 font-cute border-b border-kawaii-pink-100 pb-2\">食材清单</h4>\n                                <ul className=\"space-y-3\">\n                                {ingredients.map((item: RecipeIngredient, idx: number) => (\n                                    <li key={idx} className=\"flex justify-between items-center\">\n                                    <div className=\"flex flex-col\">\n                                        <span className=\"text-kawaii-text-main font-medium font-cute\">{item.name || item.ingredient?.name || '未知食材'}</span>\n                                        {item.hint && <span className=\"text-xs text-gray-400 font-cute\">{item.hint}</span>}\n                                    </div>\n                                    <span className=\"text-kawaii-pink-700 text-sm bg-kawaii-pink-50 px-2 py-1 rounded-lg font-cute border border-kawaii-pink-100 whitespace-nowrap ml-2\">\n                                        {item.amount} {item.unit}\n                                    </span>\n                                    </li>\n                                ))}\n                                </ul>\n                            </div>\n                        );\n                    }\n                  })()}\n                </div>\n\n                {/* Steps */}\n                <div className=\"lg:col-span-2\">\n                  <h3 className=\"font-bold text-kawaii-text-main mb-4 text-lg flex items-center gap-2 font-cute\">\n                    <span className=\"w-2 h-6 bg-kawaii-pink-500 rounded-full\"></span>\n                    详细制作教程\n                  </h3>\n                  <div className=\"space-y-8\">\n                    {recipe.steps?.sort((a: RecipeStep, b: RecipeStep) => a.step_number - b.step_number).map((step: RecipeStep) => (\n                      <div key={step.step_number} className=\"flex gap-4 group\">\n                        <div className=\"flex-shrink-0 w-10 h-10 rounded-full bg-kawaii-pink-500 text-white flex items-center justify-center font-bold shadow-soft text-lg mt-1 font-cute ring-4 ring-kawaii-pink-100\">\n                          {step.step_number}\n                        </div>\n                        <div className=\"flex-1 space-y-3\">\n                          {/* Instruction Text */}\n                          <div className=\"text-kawaii-text-main leading-relaxed text-lg font-medium whitespace-pre-line font-cute bg-white p-4 rounded-2xl shadow-soft border border-kawaii-pink-100 relative\">\n                             {/* Decorative corner */}\n                             <div className=\"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-kawaii-pink-200 rounded-tl-xl -mt-1 -ml-1\"></div>\n                            {step.instruction}\n                          </div>\n                          \n                          {/* Step Image */}\n                          {step.image_url && (\n                            <div className=\"rounded-2xl overflow-hidden shadow-sticker max-w-md border-4 border-white\">\n                              <img \n                                src={step.image_url} \n                                alt={`步骤 ${step.step_number}`} \n                                className=\"w-full h-auto object-cover hover:scale-105 transition-transform duration-500\"\n                                loading=\"lazy\"\n                              />\n                            </div>\n                          )}\n\n                          {/* Tips */}\n                          {step.tips && (\n                            <div className=\"bg-orange-50 border-l-4 border-orange-300 p-4 rounded-r-2xl text-sm flex gap-3 items-start shadow-sm\">\n                              <Lightbulb className=\"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5\" />\n                              <div>\n                                <span className=\"font-bold text-orange-800 block mb-1 font-cute\">小贴士</span>\n                                <p className=\"text-orange-800 leading-relaxed font-cute\">{step.tips}</p>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        </div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default RecipeModal;\n","import React from 'react';\nimport { Outlet, Link } from 'react-router-dom';\nimport { ChefHat, Search, BookOpen, User, Heart } from 'lucide-react';\nimport RecipeModal from '../components/RecipeModal';\n\nconst MainLayout: React.FC = () => {\n  return (\n    <div className=\"min-h-screen bg-kawaii-base text-kawaii-text-main font-cute relative overflow-x-hidden selection:bg-kawaii-pink-300 selection:text-white\">\n      \n      {/* Decorative Background Elements - Soft Blobs */}\n      <div className=\"fixed top-0 left-0 w-64 h-64 bg-kawaii-pink-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob -z-10\"></div>\n      <div className=\"fixed top-0 right-0 w-64 h-64 bg-yellow-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000 -z-10\"></div>\n      <div className=\"fixed -bottom-32 left-20 w-64 h-64 bg-pink-100 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000 -z-10\"></div>\n\n      <header className=\"sticky top-4 z-40 mx-4 md:mx-8\">\n        <div className=\"bg-white/90 backdrop-blur-md shadow-sticker rounded-full px-6 py-3 flex items-center justify-between border-2 border-white\">\n          <Link to=\"/\" className=\"flex items-center gap-2 text-kawaii-pink-500 hover:text-kawaii-pink-700 transition-transform hover:scale-105 duration-300\">\n            <div className=\"bg-kawaii-pink-100 p-2 rounded-full\">\n                <ChefHat className=\"w-6 h-6\" />\n            </div>\n            <span className=\"text-xl font-bold tracking-tight text-kawaii-pink-500\">SmartCook</span>\n          </Link>\n          \n          <nav className=\"hidden md:flex items-center gap-8\">\n            <Link to=\"/\" className=\"text-kawaii-text-main hover:text-kawaii-pink-500 font-bold transition-colors\">首页</Link>\n            <Link to=\"/recipes\" className=\"text-kawaii-text-main hover:text-kawaii-pink-500 font-bold transition-colors\">食谱库</Link>\n            <Link to=\"/upload\" className=\"text-kawaii-text-main hover:text-kawaii-pink-500 font-bold transition-colors\">发布食谱</Link>\n          </nav>\n\n          <div className=\"flex items-center gap-2\">\n            <Link to=\"/recipes\" className=\"p-2 text-kawaii-pink-300 hover:text-kawaii-pink-500 transition-colors md:hidden\">\n              <Search className=\"w-6 h-6\" />\n            </Link>\n            <Link to=\"/recipes\" className=\"p-2 text-kawaii-pink-300 hover:text-kawaii-pink-500 transition-colors md:hidden\">\n              <BookOpen className=\"w-6 h-6\" />\n            </Link>\n            <Link to=\"/login\" className=\"p-2 bg-kawaii-pink-100 text-kawaii-pink-500 rounded-full hover:bg-kawaii-pink-500 hover:text-white transition-all shadow-sm\">\n              <User className=\"w-5 h-5\" />\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"container mx-auto px-4 py-8 min-h-[calc(100vh-100px)]\">\n        <Outlet />\n      </main>\n\n      <footer className=\"bg-white/60 border-t-2 border-dashed border-kawaii-pink-100 py-8 mt-12\">\n        <div className=\"container mx-auto px-4 text-center text-kawaii-text-sub\">\n          <div className=\"flex items-center justify-center gap-2 mb-4 text-kawaii-pink-300\">\n            <Heart className=\"w-5 h-5 fill-current animate-pulse\" />\n            <span className=\"font-bold text-lg\">SmartCook</span>\n          </div>\n          <p className=\"mb-2 text-sm font-medium\">用爱与美食治愈每一天</p>\n          <p className=\"text-xs opacity-70\">© 2024 SmartCook Platform. All rights reserved.</p>\n        </div>\n      </footer>\n\n      {/* Global Recipe Modal */}\n      <RecipeModal />\n    </div>\n  );\n};\n\nexport default MainLayout;\n","import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport React, { Suspense } from 'react';\nimport MainLayout from './layout/MainLayout';\nimport { Loader2 } from 'lucide-react';\n\n// Lazy load pages\nconst Home = React.lazy(() => import('./pages/Home'));\nconst Recipes = React.lazy(() => import('./pages/Recipes'));\nconst UploadRecipe = React.lazy(() => import('./pages/UploadRecipe'));\nconst Login = React.lazy(() => import('./pages/Login'));\n\nconst PageLoader = () => (\n  <div className=\"flex justify-center items-center min-h-[50vh]\">\n    <Loader2 className=\"w-10 h-10 text-kawaii-pink-500 animate-spin\" />\n  </div>\n);\n\nfunction App() {\n  return (\n    <Router>\n      <Suspense fallback={<PageLoader />}>\n        <Routes>\n          <Route path=\"/\" element={<MainLayout />}>\n            <Route index element={<Home />} />\n            <Route path=\"recipes\" element={<Recipes />} />\n            <Route path=\"upload\" element={<UploadRecipe />} />\n            <Route path=\"search\" element={<div className=\"text-center py-10\">搜索功能开发中...</div>} />\n            <Route path=\"login\" element={<Login />} />\n            <Route path=\"*\" element={<div className=\"text-center py-10\">404 Not Found</div>} />\n          </Route>\n        </Routes>\n      </Suspense>\n    </Router>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react'\nimport { createRoot } from 'react-dom/client'\nimport App from './App'\nimport './index.css'\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n)\n"],"file":"assets/index-3IvfZGzb.js"}